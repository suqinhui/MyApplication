<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Hello MUI</title>
    <meta name="viewport"
          content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">

    <!--标准mui.css-->
    <link rel="stylesheet" href="../css/mui.min.css">
    <!--App自定义的css-->
    <link rel="stylesheet" type="text/css" href="../css/app.css"/>
</head>

<body>

<header class="mui-bar mui-bar-nav">
    <a class="mui-icon mui-icon-left-nav mui-pull-left" onClick="javascript :history.back(-1);"></a>
    <h1 class="mui-title">问题回答</h1>

</header>
<div class="mui-content">
    <!--问题1-->
    <div class="mui-card" id="question1">
        <div class="mui-input-row mui-radio mui-left">
            <h5 id="question_content1"
                style="margin-left: 10px; margin-top: 10px;margin-top: 10px;line-height: 20px; color: #000;">
                问题1：你是傻水水水傻水水水傻水水水水水踩踩踩踩踩踩踩踩踩踩踩确实超出</h5>
        </div>
        <div class="mui-input-row mui-radio mui-left">
            <label id="answer_a1">A:选项A</label>
            <input name="radio1" type="radio" value="A">
        </div>
        <div class="mui-input-row mui-radio mui-left">
            <label id="answer_b1">B:选项B</label>
            <input name="radio1" type="radio" value="B">
        </div>
        <div class="mui-input-row mui-radio mui-left">
            <label id="answer_c1">C:选项C</label>
            <input name="radio1" type="radio" value="C">
        </div>
        <div class="mui-input-row mui-radio mui-left">
            <label id="answer_d1">D:选项D</label>
            <input name="radio1" type="radio" value="D">
        </div>
        <div class="mui-input-row mui-radio mui-left">
            <h5 id="right_answer1" style="color: green; margin-left: 20px">回答正确！</h5>
        </div>
    </div>

    <!--问题2-->
    <div class="mui-card" id="question2">
        <div class="mui-input-row mui-radio mui-left">
            <h5 id="question_content2"
                style="margin-left: 10px; margin-top: 10px;margin-top: 10px;line-height: 20px; color: #000;">
                问题1：你是傻水水水傻水水水傻水水水水水踩踩踩踩踩踩踩踩踩踩踩确实超出</h5>
        </div>
        <div class="mui-input-row mui-radio mui-left">
            <label id="answer_a2">A:选项A</label>
            <input name="radio2" type="radio" value="A">
        </div>
        <div class="mui-input-row mui-radio mui-left">
            <label id="answer_b2">B:选项B</label>
            <input name="radio2" type="radio" value="B">
        </div>
        <div class="mui-input-row mui-radio mui-left">
            <label id="answer_c2">C:选项C</label>
            <input name="radio2" type="radio" value="C">
        </div>
        <div class="mui-input-row mui-radio mui-left">
            <label id="answer_d2">D:选项D</label>
            <input name="radio2" type="radio" value="D">
        </div>
        <div class="mui-input-row mui-radio mui-left">
            <h5 id="right_answer2" style="color: green; margin-left: 20px">回答正确！</h5>
        </div>
    </div>

    <!--问题3-->
    <div class="mui-card" id="question3">
        <div class="mui-input-row mui-radio mui-left">
            <h5 id="question_content3"
                style="margin-left: 10px; margin-top: 10px;margin-top: 10px;line-height: 20px; color: #000;">
                问题1：你是傻水水水傻水水水傻水水水水水踩踩踩踩踩踩踩踩踩踩踩确实超出</h5>
        </div>
        <div class="mui-input-row mui-radio mui-left">
            <label id="answer_a3">A:选项A</label>
            <input name="radio3" type="radio" value="A">
        </div>
        <div class="mui-input-row mui-radio mui-left">
            <label id="answer_b3">B:选项B</label>
            <input name="radio3" type="radio" value="B">
        </div>
        <div class="mui-input-row mui-radio mui-left">
            <label id="answer_c3">C:选项C</label>
            <input name="radio3" type="radio" value="C">
        </div>
        <div class="mui-input-row mui-radio mui-left">
            <label id="answer_d3">D:选项D</label>
            <input name="radio3" type="radio" value="D">
        </div>
        <div class="mui-input-row mui-radio mui-left">
            <h5 id="right_answer3" style="color: green; margin-left: 20px">回答正确！</h5>
        </div>
    </div>

    <!--问题4-->
    <div class="mui-card" id="question4">
        <div class="mui-input-row mui-radio mui-left">
            <h5 id="question_content4"
                style="margin-left: 10px; margin-top: 10px;margin-top: 10px;line-height: 20px; color: #000;">
                问题1：你是傻水水水傻水水水傻水水水水水踩踩踩踩踩踩踩踩踩踩踩确实超出</h5>
        </div>
        <div class="mui-input-row mui-radio mui-left">
            <label id="answer_a4">A:选项A</label>
            <input name="radio4" type="radio" value="A">
        </div>
        <div class="mui-input-row mui-radio mui-left">
            <label id="answer_b4">B:选项B</label>
            <input name="radio4" type="radio" value="B">
        </div>
        <div class="mui-input-row mui-radio mui-left">
            <label id="answer_c4">C:选项C</label>
            <input name="radio4" type="radio" value="C">
        </div>
        <div class="mui-input-row mui-radio mui-left">
            <label id="answer_d4">D:选项D</label>
            <input name="radio4" type="radio" value="D">
        </div>
        <div class="mui-input-row mui-radio mui-left">
            <h5 id="right_answer4" style="color: green; margin-left: 20px">回答正确！</h5>
        </div>
    </div>

    <!--问题5-->
    <div class="mui-card" id="question5">
        <div class="mui-input-row mui-radio mui-left">
            <h5 id="question_content5"
                style="margin-left: 10px; margin-top: 10px;margin-top: 10px;line-height: 20px; color: #000;">
                问题1：你是傻水水水傻水水水傻水水水水水踩踩踩踩踩踩踩踩踩踩踩确实超出</h5>
        </div>
        <div class="mui-input-row mui-radio mui-left">
            <label id="answer_a5">A:选项A</label>
            <input name="radio5" type="radio" value="A">
        </div>
        <div class="mui-input-row mui-radio mui-left">
            <label id="answer_b5">B:选项B</label>
            <input name="radio5" type="radio" value="B">
        </div>
        <div class="mui-input-row mui-radio mui-left">
            <label id="answer_c5">C:选项C</label>
            <input name="radio5" type="radio" value="C">
        </div>
        <div class="mui-input-row mui-radio mui-left">
            <label id="answer_d5">D:选项D</label>
            <input name="radio5" type="radio" value="D">
        </div>
        <div class="mui-input-row mui-radio mui-left">
            <h5 id="right_answer5" style="color: green; margin-left: 20px">回答正确！</h5>
        </div>
    </div>

    <footer>
        <div class="mui-control-content mui-active">
            <button id='commit' class="mui-btn mui-btn-block mui-btn-primary"
                    style="height: 30px;width:150px;padding-bottom: 40px;margin-left: 20%;text-align: center;">
                <span>提交</span></button>
        </div>
    </footer>
</div>
</body>
<script src="../js/mui.min.js"></script>
<script src="../SUI Mobile/plugin/tests/vendor/jquery.min.js"></script>
<script>
    $(document).ready(function () {
      mui.init({
        swipeBack: true //启用右滑关闭功能
      });
      //用来获取前一个页面传递过来的数据
      var GetQueryString = function (name) {
        var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");
        var r = window.location.search.substr(1).match(reg);
        if (r != null) return unescape(r[2]);
        return null;
      };
      var bookEnglishName = GetQueryString('book_english_name'); //获取页面中的
      var bookChapterId = GetQueryString('chapter_id');
//      alert(bookEnglishName + " " + bookChapterId);
      //根据书籍英文名、章节id获取章节问题
      var questionInfo = JsInteractionEvent.getChapterQuestion(bookEnglishName, bookChapterId);
      var questionInfoArray = JSON.parse(questionInfo);

      var questionContent1 = $("#question_content1");
      questionContent1.html(questionInfoArray[0].question_content);
      var questionContent2 = $("#question_content2");
      questionContent2.html(questionInfoArray[1].question_content);
      var questionContent3 = $("#question_content3");
      questionContent3.html(questionInfoArray[2].question_content);
      var questionContent4 = $("#question_content4");
      questionContent4.html(questionInfoArray[3].question_content);
      var questionContent5 = $("#question_content5");
      questionContent5.html(questionInfoArray[4].question_content);
      var answerA1 = $("#answer_a1");
      answerA1.html(questionInfoArray[0].answer_a);
      var answerA2 = $("#answer_a2");
      answerA2.html(questionInfoArray[1].answer_a);
      var answerA3 = $("#answer_a3");
      answerA3.html(questionInfoArray[2].answer_a);
      var answerA4 = $("#answer_a4");
      answerA4.html(questionInfoArray[3].answer_a);
      var answerA5 = $("#answer_a5");
      answerA5.html(questionInfoArray[4].answer_a);
      var answerB1 = $("#answer_b1");
      answerB1.html(questionInfoArray[0].answer_b);
      var answerB2 = $("#answer_b2");
      answerB2.html(questionInfoArray[1].answer_b);
      var answerB3 = $("#answer_b3");
      answerB3.html(questionInfoArray[2].answer_b);
      var answerB4 = $("#answer_b4");
      answerB4.html(questionInfoArray[3].answer_b);
      var answerB5 = $("#answer_b5");
      answerB5.html(questionInfoArray[4].answer_b);
      var answerC1 = $("#answer_c1");
      answerC1.html(questionInfoArray[0].answer_c);
      var answerC2 = $("#answer_c2");
      answerC2.html(questionInfoArray[1].answer_c);
      var answerC3 = $("#answer_c3");
      answerC3.html(questionInfoArray[2].answer_c);
      var answerC4 = $("#answer_c4");
      answerC4.html(questionInfoArray[3].answer_c);
      var answerC5 = $("#answer_c5");
      answerC5.html(questionInfoArray[4].answer_c);
      var answerD1 = $("#answer_d1");
      answerD1.html(questionInfoArray[0].answer_d);
      var answerD2 = $("#answer_d2");
      answerD2.html(questionInfoArray[1].answer_d);
      var answerD3 = $("#answer_d3");
      answerD3.html(questionInfoArray[2].answer_d);
      var answerD4 = $("#answer_d4");
      answerD4.html(questionInfoArray[3].answer_d);
      var answerD5 = $("#answer_d5");
      answerD5.html(questionInfoArray[4].answer_d);
      var rightAnswer1 = $("#right_answer1");
      rightAnswer1.hide();
      var rightAnswer2 = $("#right_answer2");
      rightAnswer2.hide();
      var rightAnswer3 = $("#right_answer3");
      rightAnswer3.hide();
      var rightAnswer4 = $("#right_answer4");
      rightAnswer4.hide();
      var rightAnswer5 = $("#right_answer5");
      rightAnswer5.hide();
      var commit = $("#commit");
      commit.click(function () {
        var questionAnswer1 = $('#question1 input[name="radio1"]:checked').val();
        var questionAnswer2 = $('#question2 input[name="radio2"]:checked').val();
        var questionAnswer3 = $('#question3 input[name="radio3"]:checked').val();
        var questionAnswer4 = $('#question4 input[name="radio4"]:checked').val();
        var questionAnswer5 = $('#question5 input[name="radio5"]:checked').val();
//        alert(questionAnswer1 + questionAnswer2 + questionAnswer3 + questionAnswer4 + questionAnswer5);
        if (questionAnswer1 == undefined || questionAnswer2 == undefined || questionAnswer3 == undefined || questionAnswer4 == undefined || questionAnswer5 == undefined) {
          alert("选项不能为空，请重新选择！");
        } else {
          var getCount = 0;
          rightAnswer1.show();
          rightAnswer2.show();
          rightAnswer3.show();
          rightAnswer4.show();
          rightAnswer5.show();
          if (questionAnswer1 == questionInfoArray[0].right_answer) {
            getCount = getCount + 10;
            rightAnswer1.html("回答正确！");
          } else {
            rightAnswer1.html("回答错误！正确答案是：" + questionInfoArray[0].right_answer);
          }
          if (questionAnswer2 == questionInfoArray[1].right_answer) {
            getCount = getCount + 10;
            rightAnswer2.html("回答正确！");
          } else {
            rightAnswer2.html("回答错误！正确答案是：" + questionInfoArray[1].right_answer);
          }
          if (questionAnswer3 == questionInfoArray[2].right_answer) {
            getCount = getCount + 10;
            rightAnswer3.html("回答正确！");
          } else {
            rightAnswer3.html("回答错误！正确答案是：" + questionInfoArray[2].right_answer);
          }
          if (questionAnswer4 == questionInfoArray[3].right_answer) {
            getCount = getCount + 10;
            rightAnswer4.html("回答正确！");
          } else {
            rightAnswer4.html("回答错误！正确答案是：" + questionInfoArray[3].right_answer);
          }
          if (questionAnswer5 == questionInfoArray[4].right_answer) {
            getCount = getCount + 10;
            rightAnswer5.html("回答正确！");
          } else {
            rightAnswer5.html("回答错误！正确答案是：" + questionInfoArray[4].right_answer);
          }
          //判断是否回答过该问题
          var isAnswerd = JsInteractionEvent.isAnsweredChapter(bookEnglishName, bookChapterId);
          if (isAnswerd == true) {
            alert("您已经回答过本章节问题，本次回答不得分！")
          } else {
            alert("本次回答问题共得" + getCount + "分");
            JsInteractionEvent.insertIntoAnswerTable(bookEnglishName, bookChapterId);
            //更新数据库中的积分
            var userInfo = JsInteractionEvent.getUserInfo();
            var userInfoObj = JSON.parse(userInfo);
            var allIntegration = parseInt(userInfoObj.all_integration);
            var todayIntegration = parseInt(userInfoObj.today_integration);
            allIntegration = allIntegration + getCount;
            todayIntegration = todayIntegration + getCount;
            JsInteractionEvent.updateUserIntegration(allIntegration, todayIntegration);
          }
        }
      });

    });


  </script>
</html>